{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Professional\\\\Desktop\\\\\\u0443\\u0440\\u043E\\u043A\\u0438\\\\React \\u0443\\u0440\\u043E\\u043A\\u0438\\\\Redax\\\\Redux-re stor\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Professional\\\\Desktop\\\\\\u0443\\u0440\\u043E\\u043A\\u0438\\\\React \\u0443\\u0440\\u043E\\u043A\\u0438\\\\Redax\\\\Redux-re stor\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nvar initialState = {\n  books: [],\n  loading: true,\n  error: null,\n  cartItems: [],\n  orderTotal: 220\n};\nvar updateCartitems = function updateCartitems(cartItems, item, idx) {\n  if (idx === -1) {\n    return [].concat(_toConsumableArray(cartItems), [item]);\n  }\n  return [].concat(_toConsumableArray(cartItems.slice(0, idx)), [item], _toConsumableArray(cartItems.slice(idx + 1)));\n};\nvar updateCartitem = function updateCartitem(book, item) {\n  var _item$id = item.id,\n    id = _item$id === void 0 ? book.id : _item$id,\n    _item$count = item.count,\n    count = _item$count === void 0 ? 0 : _item$count,\n    _item$title = item.title,\n    title = _item$title === void 0 ? book.title : _item$title,\n    _item$total = item.total,\n    total = _item$total === void 0 ? 0 : _item$total;\n  if (item) {\n    newItem = _objectSpread({}, item, {\n      count: item.count + 1,\n      total: item.total + book.price\n    });\n  } else {\n    newItem = {\n      id: book.id,\n      title: book.title,\n      count: 1,\n      total: book.price\n    };\n  }\n};\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return _objectSpread({}, state, {\n        books: [],\n        loading: true,\n        error: null\n      });\n    case 'FETCH_BOOKS_SUCCESS':\n      return _objectSpread({}, state, {\n        books: action.payload,\n        loading: false,\n        error: null\n      });\n    case 'FETCH_BOOKS_FAILURE':\n      return _objectSpread({}, state, {\n        books: [],\n        loading: false,\n        error: action.payload\n      });\n    case 'BOOK_ADDED_TO_CART':\n      var bookId = action.payload;\n      var book = state.books.find(function (book) {\n        return book.id === bookId;\n      });\n      var itemIndex = state.cartItems.findIndex(function (_ref) {\n        var id = _ref.id;\n        return id === bookId;\n      });\n      var item = state.cartItems[itemIndex];\n      return _objectSpread({}, state, {\n        cartItems: updateCartitems(state.cartItems, item, itemIndex)\n      });\n    default:\n      return state;\n  }\n};\nexport default reducer;","map":{"version":3,"names":["initialState","books","loading","error","cartItems","orderTotal","updateCartitems","item","idx","concat","_toConsumableArray","slice","updateCartitem","book","_item$id","id","_item$count","count","_item$title","title","_item$total","total","newItem","_objectSpread","price","reducer","state","arguments","length","undefined","action","type","payload","bookId","find","itemIndex","findIndex","_ref"],"sources":["C:/Users/Professional/Desktop/уроки/React уроки/Redax/Redux-re stor/my-app/src/reducers/index.js"],"sourcesContent":["\r\nconst initialState = {\r\n  books: [],\r\n  loading: true,\r\n  error: null,\r\n  cartItems: [],\r\n  orderTotal:220\r\n};\r\n\r\nconst updateCartitems = (cartItems, item, idx) => {\r\n  if (idx === -1) {\r\n    return [\r\n      ...cartItems,\r\n      item\r\n    ];\r\n  }\r\n\r\n  return [\r\n    ...cartItems.slice(0, idx),\r\n    item,\r\n    ...cartItems.slice(idx + 1),\r\n  ];\r\n};\r\n\r\nconst updateCartitem = (book, item) => {\r\n  \r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n        \r\n  if (item) {\r\n    newItem = {\r\n      ...item,\r\n      count: item.count + 1,\r\n      total: item.total + book.price\r\n    };\r\n  } else {\r\n    newItem = {\r\n      id: book.id,\r\n      title: book.title,\r\n      count: 1,\r\n      total: book.price\r\n    };\r\n  }\r\n}\r\n\r\nconst reducer = (state = initialState, action) => {\r\n \r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        ...state,\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      };\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        ...state,\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null\r\n      };\r\n      case 'FETCH_BOOKS_FAILURE':\r\n        return {\r\n          ...state,\r\n          books: [],\r\n          loading: false,\r\n          error: action.payload\r\n        };\r\n\r\n      case 'BOOK_ADDED_TO_CART':\r\n        const bookId = action.payload;\r\n        const book = state.books.find((book) => book.id === bookId);\r\n        const itemIndex = state.cartItems.findIndex(({id}) => id === bookId);\r\n        const item = state.cartItems[itemIndex];\r\n\r\n        return {\r\n          ...state,\r\n          cartItems: updateCartitems(state.cartItems, item, itemIndex)\r\n        }; \r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}