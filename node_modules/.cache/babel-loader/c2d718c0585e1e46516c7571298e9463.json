{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\Professional\\\\Desktop\\\\\\u0443\\u0440\\u043E\\u043A\\u0438\\\\React \\u0443\\u0440\\u043E\\u043A\\u0438\\\\Redax\\\\Redux-re stor\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Professional\\\\Desktop\\\\\\u0443\\u0440\\u043E\\u043A\\u0438\\\\React \\u0443\\u0440\\u043E\\u043A\\u0438\\\\Redax\\\\Redux-re stor\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nvar initialState = {\n  bookList: {\n    books: [],\n    loading: true,\n    error: null\n  },\n  shoppingCart: {\n    cartItems: [],\n    orderTotal: 0\n  }\n};\nvar updateCartItems = function updateCartItems(cartItems, item, idx) {\n  if (item.count === 0) {\n    return [].concat(_toConsumableArray(cartItems.slice(0, idx)), _toConsumableArray(cartItems.slice(idx + 1)));\n  }\n  if (idx === -1) {\n    return [].concat(_toConsumableArray(cartItems), [item]);\n  }\n  return [].concat(_toConsumableArray(cartItems.slice(0, idx)), [item], _toConsumableArray(cartItems.slice(idx + 1)));\n};\nvar updateCartItem = function updateCartItem(book) {\n  var item = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var quantity = arguments.length > 2 ? arguments[2] : undefined;\n  var _item$id = item.id,\n    id = _item$id === void 0 ? book.id : _item$id,\n    _item$count = item.count,\n    count = _item$count === void 0 ? 0 : _item$count,\n    _item$title = item.title,\n    title = _item$title === void 0 ? book.title : _item$title,\n    _item$total = item.total,\n    total = _item$total === void 0 ? 0 : _item$total;\n  return {\n    id: id,\n    title: title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\nvar updateOrder = function updateOrder(state, bookId, quantity) {\n  var books = state.books,\n    cartItems = state.cartItems;\n  var book = books.find(function (_ref) {\n    var id = _ref.id;\n    return id === bookId;\n  });\n  var itemIndex = cartItems.findIndex(function (_ref2) {\n    var id = _ref2.id;\n    return id === bookId;\n  });\n  var item = cartItems[itemIndex];\n  var newItem = updateCartItem(book, item, quantity);\n  return _objectSpread({}, state, {\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  });\n};\nvar updateBookList = function updateBookList(state, action) {\n  switch (action.type) {\n    case 'FETCH_BOOKS_REQUEST':\n      return {\n        books: [],\n        loading: true,\n        error: null\n      };\n    case 'FETCH_BOOKS_SUCCESS':\n      return _objectSpread({}, state, {\n        books: action.payload,\n        loading: false,\n        error: null\n      });\n    case 'FETCH_BOOKS_FAILURE':\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n  }\n};\nvar updateShoppingCart = function updateShoppingCart(state, action) {};\nvar reducer = function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      var item = state.cartItems.find(function (_ref3) {\n        var id = _ref3.id;\n        return id === action.payload;\n      });\n      return updateOrder(state, action.payload, -item.count);\n    default:\n      return state;\n  }\n};\nexport default reducer;","map":{"version":3,"names":["initialState","bookList","books","loading","error","shoppingCart","cartItems","orderTotal","updateCartItems","item","idx","count","concat","_toConsumableArray","slice","updateCartItem","book","arguments","length","undefined","quantity","_item$id","id","_item$count","_item$title","title","_item$total","total","price","updateOrder","state","bookId","find","_ref","itemIndex","findIndex","_ref2","newItem","_objectSpread","updateBookList","action","type","payload","updateShoppingCart","reducer","_ref3"],"sources":["C:/Users/Professional/Desktop/уроки/React уроки/Redax/Redux-re stor/my-app/src/reducers/index.js"],"sourcesContent":["\r\nconst initialState = {\r\n  bookList: {\r\n    books: [],\r\n    loading: true,\r\n    error: null\r\n  },\r\n\r\n  shoppingCart: {\r\n    cartItems: [],\r\n    orderTotal: 0\r\n  }\r\n};\r\n\r\nconst updateCartItems = (cartItems, item, idx) => {\r\n  if (item.count === 0) {\r\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\r\n  }\r\n\r\n  if (idx === -1) {\r\n    return [...cartItems, item];\r\n  }\r\n\r\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\r\n};\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\r\n\r\n  return {\r\n    id,\r\n    title,\r\n    count: count + quantity,\r\n    total: total + quantity * book.price,\r\n  };\r\n};\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n  const { books, cartItems } = state;\r\n  const book = books.find(({ id }) => id === bookId);\r\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n  const item = cartItems[itemIndex];\r\n\r\n  const newItem = updateCartItem(book, item, quantity);\r\n  return {\r\n    ...state,\r\n    cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n  };\r\n};\r\n\r\nconst updateBookList = (state, action) => {\r\n  \r\n  switch (action.type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null,\r\n      };\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        ...state,\r\n        books: action.payload,\r\n        loading: false,\r\n        error: null,\r\n      };\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: action.payload,\r\n      };\r\n  }\r\n\r\n};\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n  \r\n\r\n\r\n};\r\n\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n\r\n    case 'BOOK_ADDED_TO_CART':\r\n      return updateOrder(state, action.payload, 1);\r\n    case 'BOOK_REMOVED_FROM_CART':\r\n      return updateOrder(state, action.payload, -1);\r\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n      const item = state.cartItems.find(({ id }) => id === action.payload);\r\n      return updateOrder(state, action.payload, -item.count);\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}